import { reqPostBrace, promise } from './request';
export default (function (_ref) {
  var path = _ref.path,
      data = _ref.data,
      appSn = _ref.appSn,
      contentType = _ref.contentType,
      acceptType = _ref.acceptType,
      filename = _ref.filename,
      callback = _ref.callback;
  promise(path, reqPostBrace({
    method: 'POST',
    params: data,
    appSn: appSn,
    contentType: contentType,
    acceptType: acceptType
  })).then(function (res) {
    return res.blob();
  }).then(function (res) {
    if (window.navigator.msSaveOrOpenBlob) {
      window.navigator.msSaveOrOpenBlob(res, filename);
    } else {
      var a = document.createElement('a');
      var url = window.URL.createObjectURL(res);
      a.href = url;
      a.download = filename;
      a.click();
      window.URL.revokeObjectURL(url);
    }

    callback && callback();
  });
});