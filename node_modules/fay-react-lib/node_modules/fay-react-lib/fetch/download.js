import { reqPostBrace, promise } from './request';
export default (function (path, data, appSn, defaultJson, acceptType, filename, callback) {
  promise(path, reqPostBrace('POST', data, appSn, defaultJson, acceptType)).then(function (res) {
    return res.blob();
  }).then(function (res) {
    if (window.navigator.msSaveOrOpenBlob) {
      window.navigator.msSaveOrOpenBlob(res, filename);
    } else {
      var a = document.createElement('a');
      var url = window.URL.createObjectURL(res);
      a.href = url;
      a.download = filename;
      a.click();
      window.URL.revokeObjectURL(url);
    }

    callback && callback();
  });
});